<!--
  Generated by WhyML - WhyML Test App
  Description: Test application to verify WhyML functionality
  Generated on: 2025-09-19 14:27:02.792191
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Test application to verify WhyML functionality">
  <meta name="author" content="WhyML Team">
  <meta property="og:title" content="WhyML Test App">
  <meta property="og:description" content="Test application to verify WhyML functionality">
  <meta property="og:type" content="website">
  <title>WhyML Test App</title>
  <style>
    .container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    .main-title {
      color: #007acc;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 32px;
    }

    .intro {
      font-family: Arial, sans-serif;
      color: #333;
      margin: 16px 0;
    }

    .section-title {
      color: #007acc;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 24px;
      margin-top: 24px;
    }

    .feature-list {
      font-family: Arial, sans-serif;
      color: #333;
      padding-left: 20px;
    }

    .features-section {
      margin-top: 20px;
    }

  </style>

        <link rel="manifest" href="/manifest.json">
        <meta name="theme-color" content="#000000">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
        <meta name="apple-mobile-web-app-title" content="WhyML Test App">
        
</head>
<body>
  <div>
        <div class="container">
            <h1>        <div class="main-title">Welcome to WhyML Test App</div></h1>
            <p>        <div class="intro">This is a test application to verify WhyML CLI functionality works correctly.</div></p>
            <div>
                <div class="features-section">
                    <h2>            <div class="section-title">Features</div></h2>
                    <ul>
                        <div class="feature-list">
                            <li>                <div>CLI Commands</div></li>
                            <li>                <div>Natural Language Conversion</div></li>
                            <li>                <div>Application Generators</div></li>
                            <li>                <div>Development Server</div></li>
            </div>
          </ul>
        </div>
      </div>
    </div>
  </div>

        <script>
        
// SPA Router Configuration
const routes = {};

class Router {
    constructor() {
        this.routes = new Map();
        this.currentPath = '/';
        this.init();
    }
    
    init() {
        // Load routes from configuration
        Object.entries(routes).forEach(([path, component]) => {
            this.addRoute(path, component);
        });
        
        // Handle browser navigation
        window.addEventListener('popstate', () => this.handleRoute());
        
        // Handle initial load
        document.addEventListener('DOMContentLoaded', () => this.handleRoute());
        
        // Handle navigation clicks
        document.addEventListener('click', this.handleClick.bind(this));
    }
    
    addRoute(path, component) {
        this.routes.set(path, component);
    }
    
    handleClick(event) {
        if (event.target.matches('a[href^="/"]')) {
            event.preventDefault();
            this.navigateTo(event.target.getAttribute('href'));
        }
    }
    
    navigateTo(path, replace = false) {
        if (replace) {
            history.replaceState(null, null, path);
        } else {
            history.pushState(null, null, path);
        }
        this.handleRoute();
    }
    
    handleRoute() {
        const path = window.location.pathname;
        this.currentPath = path;
        
        const route = this.routes.get(path) || this.routes.get('*') || this.routes.get('/');
        
        if (route) {
            this.renderRoute(route, path);
        } else {
            this.render404();
        }
    }
    
    renderRoute(route, path) {
        const container = document.getElementById('app') || document.body;
        
        if (typeof route === 'string') {
            container.innerHTML = route;
        } else if (typeof route === 'function') {
            route(container, path);
        } else if (route.template) {
            container.innerHTML = route.template;
        }
        
        // Trigger route change event
        window.dispatchEvent(new CustomEvent('routechange', {
            detail: { path, route }
        }));
    }
    
    render404() {
        const container = document.getElementById('app') || document.body;
        container.innerHTML = `
            <div style="text-align: center; padding: 2rem;">
                <h1>404 - Page Not Found</h1>
                <p>The page you're looking for doesn't exist.</p>
                <a href="/">Go Home</a>
            </div>
        `;
    }
}

// Initialize router
const router = new Router();

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
    module.exports = router;
}

        
// SPA Enhancements for WhyML Test App
class SPAApp {
    constructor() {
        this.currentRoute = '/';
        this.routes = {};
        this.init();
    }
    
    init() {
        window.addEventListener('popstate', () => {
            this.handleRouteChange();
        });
        
        // Handle initial route
        this.handleRouteChange();
        
        // Setup navigation links
        this.setupNavigationLinks();
    }
    
    setupNavigationLinks() {
        document.addEventListener('click', (e) => {
            if (e.target.tagName === 'A' && e.target.getAttribute('href')) {
                const href = e.target.getAttribute('href');
                if (href.startsWith('/') || href.startsWith('#')) {
                    e.preventDefault();
                    this.navigateTo(href);
                }
            }
        });
    }
    
    navigateTo(path) {
        if (path !== this.currentRoute) {
            history.pushState(null, '', path);
            this.currentRoute = path;
            this.handleRouteChange();
        }
    }
    
    handleRouteChange() {
        const path = window.location.pathname || '/';
        this.currentRoute = path;
        
        // Trigger route change event
        const event = new CustomEvent('spa-route-change', {
            detail: { path, route: this.currentRoute }
        });
        document.dispatchEvent(event);
    }
    
    // Add page transition effects
    transitionTo(newContent) {
        const main = document.querySelector('main') || document.body;
        main.style.opacity = '0';
        
        setTimeout(() => {
            main.innerHTML = newContent;
            main.style.opacity = '1';
        }, 150);
    }
}

// Initialize SPA
if (typeof window !== 'undefined') {
    window.spaApp = new SPAApp();
}

        </script>
        

        <script>
        
// PWA Enhancements for WhyML Test App
class PWAApp {
    constructor() {
        this.isOnline = navigator.onLine;
        this.init();
    }
    
    init() {
        // Register service worker
        this.registerServiceWorker();
        
        // Setup online/offline detection
        this.setupConnectivityDetection();
        
        // Setup install prompt
        this.setupInstallPrompt();
        
        // Setup update notifications
        this.setupUpdateNotifications();
    }
    
    async registerServiceWorker() {
        if ('serviceWorker' in navigator) {
            try {
                const registration = await navigator.serviceWorker.register('/sw.js');
                console.log('Service Worker registered:', registration);
                
                // Listen for updates
                registration.addEventListener('updatefound', () => {
                    this.handleServiceWorkerUpdate(registration);
                });
            } catch (error) {
                console.error('Service Worker registration failed:', error);
            }
        }
    }
    
    handleServiceWorkerUpdate(registration) {
        const newWorker = registration.installing;
        if (newWorker) {
            newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                    this.showUpdateNotification();
                }
            });
        }
    }
    
    setupConnectivityDetection() {
        window.addEventListener('online', () => {
            this.isOnline = true;
            this.showConnectivityStatus('online');
        });
        
        window.addEventListener('offline', () => {
            this.isOnline = false;
            this.showConnectivityStatus('offline');
        });
    }
    
    setupInstallPrompt() {
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            this.showInstallButton();
        });
        
        // Handle install button click
        document.addEventListener('click', async (e) => {
            if (e.target.id === 'pwa-install-btn') {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log('Install prompt outcome:', outcome);
                    deferredPrompt = null;
                    this.hideInstallButton();
                }
            }
        });
    }
    
    showInstallButton() {
        if (!document.getElementById('pwa-install-btn')) {
            const button = document.createElement('button');
            button.id = 'pwa-install-btn';
            button.textContent = 'Install App';
            button.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: #007acc;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 6px;
                cursor: pointer;
                z-index: 1000;
                font-family: Arial, sans-serif;
            `;
            document.body.appendChild(button);
        }
    }
    
    hideInstallButton() {
        const button = document.getElementById('pwa-install-btn');
        if (button) {
            button.remove();
        }
    }
    
    showConnectivityStatus(status) {
        const existing = document.getElementById('connectivity-status');
        if (existing) existing.remove();
        
        const statusDiv = document.createElement('div');
        statusDiv.id = 'connectivity-status';
        statusDiv.textContent = status === 'online' ? 'Back online!' : 'You are offline';
        statusDiv.style.cssText = `
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            border-radius: 6px;
            color: white;
            background: ${status === 'online' ? '#4CAF50' : '#f44336'};
            z-index: 1000;
            font-family: Arial, sans-serif;
        `;
        
        document.body.appendChild(statusDiv);
        
        setTimeout(() => {
            if (statusDiv && statusDiv.parentNode) {
                statusDiv.parentNode.removeChild(statusDiv);
            }
        }, 3000);
    }
    
    showUpdateNotification() {
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #333;
            color: white;
            padding: 15px;
            border-radius: 6px;
            z-index: 1000;
            font-family: Arial, sans-serif;
        `;
        notification.innerHTML = `
            <div>New version available!</div>
            <button onclick="window.location.reload()" style="
                background: #007acc;
                color: white;
                border: none;
                padding: 8px 15px;
                border-radius: 4px;
                cursor: pointer;
                margin-top: 10px;
            ">Refresh</button>
        `;
        
        document.body.appendChild(notification);
    }
    
    setupUpdateNotifications() {
        // Check for updates periodically
        setInterval(() => {
            if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {
                navigator.serviceWorker.controller.postMessage({ type: 'CHECK_FOR_UPDATES' });
            }
        }, 60000); // Check every minute
    }
}

// Initialize PWA
if (typeof window !== 'undefined') {
    window.pwaApp = new PWAApp();
}

        </script>
        
</body>
</html>