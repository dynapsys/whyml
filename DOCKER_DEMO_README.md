# WhyML Multi-Technology Stack Demonstration

🚀 **Visual comparison of HTML conversion across different technology stacks**

This Docker Compose setup demonstrates WhyML's capability to convert a single HTML source into multiple technology implementations, allowing for visual comparison and evaluation of conversion quality.

## 📋 Overview

The demonstration showcases how the same HTML content (`example_com` project) is converted and rendered across 7 different technology stacks:

| Technology | Port | Description | Container |
|------------|------|-------------|-----------|
| **Dashboard** | 8010 | Main summary page with iframe previews | `dashboard` |
| **Source (Original)** | 8015 | Original scraped HTML content | `source-service` |
| **HTML Static** | 8011 | Static HTML generated by WhyML | `html-service` |
| **JavaScript/Node.js** | 8012 | JavaScript/Node.js implementation | `js-service` |
| **PHP 8.2** | 8013 | PHP 8.2 class-based implementation | `php-service` |
| **React** | 8014 | React TSX component | `react-service` |
| **TypeScript** | 8016 | TypeScript implementation | `ts-service` |
| **Vue.js** | 8017 | Vue.js 3 component | `vue-service` |
| **Screenshot Service** | 8018 | Automated screenshot generation | `screenshot-service` |

## 🎯 Purpose

This setup serves multiple purposes:

1. **Visual Quality Assessment** - Compare how content renders across different stacks
2. **Conversion Validation** - Verify that WhyML conversions maintain content integrity
3. **Technology Evaluation** - Assess which technology stack works best for specific use cases
4. **Development Workflow** - Streamline the process of evaluating conversion results
5. **Demonstration Tool** - Showcase WhyML's capabilities to stakeholders

## 🚀 Quick Start

### Prerequisites

- Docker (version 20.0+)
- Docker Compose (version 2.0+)
- At least 4GB available RAM
- Ports 8010-8018 available

### 1. Clone and Navigate

```bash
cd /home/tom/github/dynapsys/whyml
```

### 2. Start the Demo

```bash
./start-demo.sh
```

This script will:
- ✅ Check prerequisites
- 🔍 Verify port availability
- 🏗️ Build all Docker services
- 🚀 Start all containers
- 🏥 Perform health checks
- 📋 Display access URLs

### 3. Access the Dashboard

Open your browser and navigate to: **http://localhost:8010**

## 🎛️ Dashboard Features

The main dashboard (port 8010) provides:

### 📊 **Visual Comparison Grid**
- Side-by-side iframe previews of all technology implementations
- Interactive "Preview" buttons to load content on-demand
- "Open" buttons to view individual services in new tabs

### 📸 **Screenshot Generation**
- Automated screenshots of the original source content
- Visual comparison tool for quality assessment
- Powered by Puppeteer with headless Chrome

### 🎨 **Technology Badges**
- Color-coded technology stack indicators
- Hover effects and responsive design
- Modern, professional UI with gradient backgrounds

### 📈 **Service Statistics**
- Real-time service count and port information
- Project information display
- Service health monitoring

## 🔧 Technology Stack Details

### 🌐 **HTML Static Service (Port 8011)**
- **Environment**: Nginx Alpine
- **Content**: Pure HTML/CSS generated by WhyML
- **Features**: Static file serving with iframe support

### 🟨 **JavaScript/Node.js Service (Port 8012)**
- **Environment**: Node.js 18 Alpine
- **Framework**: Express.js with CORS
- **Features**: Dynamic HTML generation, JavaScript execution
- **Entry Point**: `server.js` with `index.js` content integration

### 🐘 **PHP 8.2 Service (Port 8013)**
- **Environment**: PHP 8.2 with Apache
- **Architecture**: Class-based component system
- **Features**: 
  - `ExampleDomainComponent` class instantiation
  - Dynamic HTML rendering with proper escaping
  - CSS generation and style management
  - Component data management methods

### ⚛️ **React Service (Port 8014)**
- **Environment**: Node.js 18 with React 18
- **Framework**: React with TypeScript support
- **Features**: 
  - Component-based architecture
  - React DOM rendering
  - Babel JSX transformation
  - Development server with hot reload support

### 📘 **TypeScript Service (Port 8016)**
- **Environment**: Node.js 18 with TypeScript 4.9
- **Features**: 
  - Type-safe component implementation
  - Class-based architecture demonstration
  - TypeScript compilation and execution

### 🍃 **Vue.js Service (Port 8017)**
- **Environment**: Node.js 18 with Vue 3
- **Architecture**: Vue 3 Composition API
- **Features**: 
  - Component template rendering
  - Vue lifecycle methods
  - Modern Vue.js development patterns

### 📸 **Screenshot Service (Port 8018)**
- **Environment**: Node.js 18 with Chromium
- **Technology**: Puppeteer for headless browser automation
- **Features**: 
  - Automated screenshot generation
  - Configurable viewport settings
  - PNG image output with quality control

## 📁 Project Structure

```
whyml/
├── docker-compose.yml              # Main orchestration file
├── start-demo.sh                   # Startup script
├── docker/                         # Docker configurations
│   ├── Dockerfile.dashboard        # Dashboard service
│   ├── Dockerfile.html            # HTML static service
│   ├── Dockerfile.nodejs          # JavaScript service
│   ├── Dockerfile.php             # PHP service
│   ├── Dockerfile.react           # React service
│   ├── Dockerfile.typescript      # TypeScript service
│   ├── Dockerfile.vue             # Vue service
│   ├── Dockerfile.screenshot      # Screenshot service
│   ├── dashboard.html             # Dashboard UI
│   ├── dashboard-server.js        # Dashboard backend
│   ├── nginx.conf                 # Nginx configuration
│   ├── php.conf                   # Apache/PHP configuration
│   └── [service-specific files]   # Server scripts and configs
└── project/example_com/            # Source content
    ├── source/                     # Original HTML
    ├── html/                       # Generated HTML
    ├── php/                        # Generated PHP
    ├── js/                         # Generated JavaScript
    ├── react/                      # Generated React
    ├── ts/                         # Generated TypeScript
    └── vue/                        # Generated Vue
```

## 🛠️ Management Commands

### Basic Operations
```bash
# Start all services
./start-demo.sh

# Stop all services
docker-compose down

# Restart all services
docker-compose restart

# View service status
docker-compose ps
```

### Debugging and Logs
```bash
# View all logs
docker-compose logs -f

# View specific service logs
docker-compose logs -f [service-name]

# View dashboard logs
docker-compose logs -f dashboard

# View PHP service logs
docker-compose logs -f php-service
```

### Individual Service Management
```bash
# Restart specific service
docker-compose restart [service-name]

# Rebuild specific service
docker-compose build [service-name]

# Stop specific service
docker-compose stop [service-name]
```

## 🔍 Troubleshooting

### Common Issues

#### **Services Not Loading**
- **Cause**: Services may need additional time to initialize
- **Solution**: Wait 30-60 seconds, then refresh the browser
- **Check**: `docker-compose ps` to verify all services are running

#### **Port Conflicts**
- **Cause**: Ports 8010-8018 are already in use
- **Solution**: Stop conflicting services or modify port mappings in `docker-compose.yml`
- **Check**: `lsof -i :8010-8018` to identify port usage

#### **PHP Service Issues**
- **Cause**: PHP class loading or namespace issues
- **Solution**: Check PHP logs: `docker-compose logs php-service`
- **Verify**: Component class is properly loaded in `web_index.php`

#### **React/Vue Build Failures**
- **Cause**: Node.js dependency installation issues
- **Solution**: Rebuild the service: `docker-compose build react-service`
- **Alternative**: Clear Docker cache: `docker system prune`

#### **Screenshot Service Failures**
- **Cause**: Chromium/Puppeteer issues in container
- **Solution**: Increase container memory allocation
- **Check**: Service health: `curl http://localhost:8018/health`

### Performance Optimization

#### **Resource Allocation**
- Minimum 4GB RAM recommended
- SSD storage for better container performance
- Ensure adequate CPU resources for multiple Node.js services

#### **Network Optimization**
- All services run on the same Docker network (`whyml-network`)
- Internal communication uses service names
- External access through localhost port mapping

## 📊 Service Architecture

### **Dashboard Service (Port 8010)**
```
┌─────────────────┐
│   Dashboard     │
│   (Express.js)  │
├─────────────────┤
│ • Service Grid  │
│ • Iframe Mgmt   │
│ • Screenshot    │
│ • API Endpoints │
└─────────────────┘
```

### **Technology Services (Ports 8011-8017)**
```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│ HTML Static  │    │ Node.js/JS   │    │ PHP 8.2      │
│ (Nginx)      │    │ (Express)    │    │ (Apache)     │
└──────────────┘    └──────────────┘    └──────────────┘

┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│ React 18     │    │ TypeScript   │    │ Vue.js 3     │
│ (Node.js)    │    │ (Node.js)    │    │ (Node.js)    │
└──────────────┘    └──────────────┘    └──────────────┘
```

## 🎯 Use Case Scenarios

### **Development Workflow**
1. Generate content with WhyML across multiple formats
2. Start the demo environment
3. Compare visual outputs side-by-side
4. Identify and fix rendering inconsistencies
5. Iterate on conversion configurations

### **Quality Assurance**
1. Deploy converted content in test environment
2. Use screenshot service for automated visual testing
3. Compare against original source requirements
4. Generate reports on conversion fidelity

### **Client Demonstrations**
1. Show WhyML's multi-format conversion capabilities
2. Allow interactive exploration of different technology stacks
3. Compare performance and rendering characteristics
4. Demonstrate integration possibilities

### **Technology Evaluation**
1. Assess which technology stack best fits project requirements
2. Compare development complexity across formats
3. Evaluate maintenance and deployment considerations
4. Make informed architectural decisions

## 🚀 Advanced Configuration

### **Adding New Technology Stacks**

To add a new technology implementation:

1. **Create the service directory**: `project/example_com/[new-tech]/`
2. **Add Dockerfile**: `docker/Dockerfile.[new-tech]`
3. **Update docker-compose.yml**: Add new service definition
4. **Update dashboard**: Add service to dashboard configuration
5. **Update port allocation**: Choose next available port

### **Customizing the Dashboard**

The dashboard can be customized by modifying:
- `docker/dashboard.html`: UI components and styling
- `docker/dashboard-server.js`: Backend API and service configuration
- Service colors and descriptions in the JavaScript configuration

### **Performance Tuning**

For better performance:
- Increase Docker memory allocation
- Use volume mounts for faster file access
- Implement Redis caching for screenshot service
- Add CDN for static assets

## 📄 License

This demonstration setup is part of the WhyML project and follows the same licensing terms.

## 🤝 Contributing

To contribute improvements to this demonstration setup:

1. Fork the WhyML repository
2. Create a feature branch for demo improvements
3. Test your changes with the complete setup
4. Submit a pull request with detailed descriptions

---

**🎉 Ready to explore WhyML's multi-technology conversion capabilities!**

Access the dashboard at: **http://localhost:8010**
